<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>My Mentees</title>
<meta name="viewport" content="width=device-width, initial-scale=1">

<style>
body {
  font-family: Inter, Arial, sans-serif;
  background:#f4f7fb;
  margin:0;
}
.container {
  max-width:1100px;
  margin:20px auto;
  background:white;
  padding:20px;
  border-radius:10px;
  box-shadow:0 8px 28px rgba(11,20,40,0.06);
}
h2 {
  margin-bottom:16px;
}
table {
  width:100%;
  border-collapse:collapse;
}
th, td {
  padding:12px;
  border-bottom:1px solid #e5e7eb;
  text-align:left;
}
th {
  background:#f1f5f9;
}
.badge {
  padding:4px 8px;
  border-radius:6px;
  font-size:12px;
}
.ok { background:#dcfce7; color:#166534; }
.missing { background:#fee2e2; color:#991b1b; }

button {
  padding:6px 10px;
  border-radius:6px;
  border:none;
  background:#1976d2;
  color:white;
  cursor:pointer;
}
</style>
</head>

<body>
<div class="container">
  <h2>üë®‚Äçüéì My Mentees</h2>

  <table>
    <thead>
      <tr>
        <th>Name</th>
        <th>USN</th>
        <th>Department</th>
        <th>Academic Year</th>
        <th>Profile</th>
      </tr>
    </thead>
    <tbody id="menteesTable">
      <tr><td colspan="5">Loading...</td></tr>
    </tbody>
  </table>
</div>

<script>
async function loadMentees() {
  const res = await fetch('/api/mentor/mentees');

  if (!res.ok) {
    document.getElementById('menteesTable').innerHTML =
      '<tr><td colspan="5">Unauthorized</td></tr>';
    return;
  }

  const students = await res.json();

  if (students.length === 0) {
    document.getElementById('menteesTable').innerHTML =
      '<tr><td colspan="5">No mentees assigned</td></tr>';
    return;
  }

  document.getElementById('menteesTable').innerHTML =
    students.map(s => `
      <tr>
        <td>${s.name || '-'}</td>
        <td>${s.usn}</td>
        <td>${s.department || '-'}</td>
        <td>${s.academicYear || '-'}</td>
        <td>
          <button onclick="viewStudent(${s.studentId})">View</button>
        </td>
      </tr>
    `).join('');
}

function viewStudent(id) {
  alert("Student ID: " + id + " (profile page next)");
}

loadMentees();
</script>
</body>
</html>
